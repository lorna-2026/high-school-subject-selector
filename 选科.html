<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ä¸­åˆ†ç§‘æ„å‘æµ‹è¯„ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .dark-theme {
            background: linear-gradient(135deg, #1a1a1a 0%, #2c3e50 100%);
            color: #e0e0e0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .dark-theme .container {
            background: #2c3e50;
        }

        header {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .dark-theme header {
            background: linear-gradient(135deg, #1a5276 0%, #17202a 100%);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-container {
            padding: 30px;
            background: #f8f9fa;
        }

        .dark-theme .progress-container {
            background: #34495e;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 20px;
        }

        .step-dot {
            width: 40px;
            height: 40px;
            background: #bdc3c7;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: #3498db;
            transform: scale(1.1);
        }

        .step-dot.completed {
            background: #27ae60;
        }

        .step-label {
            position: absolute;
            top: 45px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 12px;
            color: #7f8c8d;
        }

        .dark-theme .step-label {
            color: #bdc3c7;
        }

        .progress-bar {
            height: 6px;
            background: #bdc3c7;
            border-radius: 3px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #27ae60);
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .step {
            padding: 30px;
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .dark-theme h2 {
            color: #ecf0f1;
            border-bottom-color: #1abc9c;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .dark-theme label {
            color: #ecf0f1;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .dark-theme input, .dark-theme select {
            background: #34495e;
            border-color: #4a6572;
            color: #ecf0f1;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 10px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-prev {
            background: #95a5a6;
            color: white;
        }

        .btn-next, .btn-submit {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .dark-theme .question {
            background: #34495e;
            border-left-color: #1abc9c;
        }

        .rating {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .rating label {
            display: inline-flex;
            align-items: center;
            margin: 5px;
            cursor: pointer;
        }

        .rating input[type="radio"] {
            margin-right: 8px;
            width: auto;
        }

        .score-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .score-table th, .score-table td {
            border: 1px solid #e0e6ed;
            padding: 12px;
            text-align: center;
        }

        .score-table th {
            background: #3498db;
            color: white;
        }

        .score-table input {
            width: 100px;
            text-align: center;
        }

        .choice {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            margin-top: 10px;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .checkbox-column {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .dark-theme .checkbox-column {
            background: #34495e;
        }

        .checkbox-column h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .dark-theme .checkbox-column h4 {
            color: #ecf0f1;
        }

        .checkbox-column label {
            display: block;
            margin: 8px 0;
            font-weight: normal;
        }

        .checkbox-column input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .input-error {
            border-color: #e74c3c !important;
        }

        .results-container {
            padding: 30px;
        }

        .result-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .recommendation-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }

        .recommendation-card.physics {
            border-left: 5px solid #e74c3c;
        }

        .recommendation-card.history {
            border-left: 5px solid #3498db;
        }

        .recommendation-card.balanced {
            border-left: 5px solid #2ecc71;
        }

        .score-comparison {
            margin-bottom: 30px;
        }

        .score-bars {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .score-bar {
            flex: 1;
            text-align: center;
        }

        .bar-label {
            margin-bottom: 10px;
            font-weight: 500;
        }

        .bar-container {
            height: 200px;
            width: 40px;
            margin: 0 auto;
            background: #ecf0f1;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .dark-theme .bar-container {
            background: #4a6572;
        }

        .bar-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            border-radius: 20px;
            transition: height 1s ease-out;
        }

        .bar-fill.physics {
            background: linear-gradient(to top, #e74c3c, #c0392b);
        }

        .bar-fill.history {
            background: linear-gradient(to top, #3498db, #2980b9);
        }

        .bar-value {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .combinations-list {
            margin: 30px 0;
        }

        .combination-item {
            background: white;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            transition: all 0.3s ease;
        }

        .dark-theme .combination-item {
            background: #34495e;
            border-color: #4a6572;
        }

        .combination-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .combination-item.rank-1 {
            border-color: #f1c40f;
            background: linear-gradient(135deg, #fff8e1, #fffde7);
        }

        .dark-theme .combination-item.rank-1 {
            background: linear-gradient(135deg, #34495e, #2c3e50);
        }

        .rank {
            position: absolute;
            top: -10px;
            left: -10px;
            background: #f1c40f;
            color: #333;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .combo-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .dark-theme .combo-name {
            color: #ecf0f1;
        }

        .combo-score {
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .combo-desc {
            color: #666;
            line-height: 1.5;
        }

        .dark-theme .combo-desc {
            color: #bdc3c7;
        }

        .analysis-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .dark-theme .analysis-section {
            background: #34495e;
        }

        .result-actions {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            justify-content: center;
        }

        .result-btn {
            padding: 12px 24px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .result-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 14px;
            border-top: 1px solid #e0e6ed;
        }

        .dark-theme footer {
            color: #bdc3c7;
            border-top-color: #4a6572;
        }

        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .score-bars {
                flex-direction: column;
                align-items: center;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
        }

        @media print {
            .btn, .result-actions, #themeToggle, footer {
                display: none !important;
            }
            
            .step, .results-container {
                box-shadow: none !important;
                border: 1px solid #ddd !important;
            }
            
            .combination-item.rank-1:before {
                display: none !important;
            }
        }

        #themeToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        #themeToggle:hover {
            background: #2980b9;
            transform: rotate(30deg);
        }

        #printBtn {
            background: #2ecc71;
        }

        #exportBtn {
            background: #9b59b6;
        }

        #shareResultsBtn {
            background: #e67e22;
        }

        #restartBtn {
            background: #e74c3c;
        }
    </style>
</head>
<body>
    <button id="themeToggle" onclick="toggleTheme()">ğŸŒ™</button>
    
    <div class="container">
        <header>
            <h1>é«˜ä¸­åˆ†ç§‘æ„å‘æµ‹è¯„ç³»ç»Ÿ</h1>
            <p class="subtitle">ç§‘å­¦è¯„ä¼°ï¼Œæ™ºèƒ½æ¨èï¼ŒåŠ©ä½ åšå‡ºæœ€ä½³é€‰ç§‘å†³ç­–</p>
        </header>

        <div class="progress-container">
            <div class="step-indicator">
                <div class="step-dot active" data-step="1">
                    1
                    <div class="step-label">åŸºæœ¬ä¿¡æ¯</div>
                </div>
                <div class="step-dot" data-step="2">
                    2
                    <div class="step-label">å­¦ç§‘å…´è¶£</div>
                </div>
                <div class="step-dot" data-step="3">
                    3
                    <div class="step-label">å­¦ç§‘æˆç»©</div>
                </div>
                <div class="step-dot" data-step="4">
                    4
                    <div class="step-label">å­¦ä¹ èƒ½åŠ›</div>
                </div>
                <div class="step-dot" data-step="5">
                    5
                    <div class="step-label">ä¸“ä¸šå€¾å‘</div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <main id="app">
            <!-- æ­¥éª¤1ï¼šåŸºæœ¬ä¿¡æ¯ -->
            <div class="step active" id="step1">
                <h2>ç¬¬ä¸€æ­¥ï¼šåŸºæœ¬ä¿¡æ¯</h2>
                <div class="form-group">
                    <label>å§“åï¼ˆå¯é€‰ï¼‰ï¼š</label>
                    <input type="text" id="name" placeholder="å¯ä¸å¡«">
                </div>
                <div class="form-group">
                    <label>å¹´çº§ï¼š</label>
                    <select id="grade">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="é«˜ä¸€ä¸Š">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                        <option value="é«˜ä¸€ä¸‹">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                        <option value="é«˜äºŒ">é«˜äºŒå¹´çº§</option>
                    </select>
                    <div class="error" id="gradeError">è¯·é€‰æ‹©å¹´çº§</div>
                </div>
                <div class="form-group">
                    <label>æ‰€åœ¨çœä»½ï¼š</label>
                    <input type="text" id="province" placeholder="å¦‚ï¼šæ±Ÿè‹çœ">
                </div>
                <div class="form-group">
                    <label>ä½ æ‰€åœ¨å­¦æ ¡å®è¡Œçš„æ˜¯å“ªç§é€‰ç§‘æ¨¡å¼ï¼Ÿ</label>
                    <select id="mode">
                        <option value="3+1+2">3+1+2æ¨¡å¼</option>
                        <option value="3+3">3+3æ¨¡å¼</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn btn-next" onclick="nextStep(2)">å¼€å§‹æµ‹è¯„</button>
                </div>
            </div>

            <!-- æ­¥éª¤2ï¼šå­¦ç§‘å…´è¶£è¯„ä¼° -->
            <div class="step" id="step2">
                <h2>ç¬¬äºŒæ­¥ï¼šå­¦ç§‘å…´è¶£è¯„ä¼°</h2>
                <p>è¯·è¯„ä¼°ä½ å¯¹ä»¥ä¸‹å­¦ç§‘çš„å…´è¶£ç¨‹åº¦ï¼ˆ1-5åˆ†ï¼Œ1åˆ†è¡¨ç¤ºä¸æ„Ÿå…´è¶£ï¼Œ5åˆ†è¡¨ç¤ºéå¸¸æ„Ÿå…´è¶£ï¼‰</p>
                
                <div class="question">
                    <p>1. æˆ‘å¯¹ç‰©ç†å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_physics" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_physics" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_physics" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_physics" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_physics" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>2. æˆ‘å¯¹å†å²å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_history" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_history" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_history" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_history" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_history" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>3. æˆ‘å¯¹åŒ–å­¦å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_chemistry" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_chemistry" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_chemistry" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_chemistry" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_chemistry" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>4. æˆ‘å¯¹ç”Ÿç‰©å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_biology" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_biology" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_biology" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_biology" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_biology" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>5. æˆ‘å¯¹åœ°ç†å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_geography" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_geography" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_geography" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_geography" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_geography" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>6. æˆ‘å¯¹æ”¿æ²»å­¦ç§‘çš„å…´è¶£ï¼š</p>
                    <div class="rating">
                        <label><input type="radio" name="interest_politics" value="1" required> 1åˆ†ï¼ˆä¸æ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_politics" value="2"> 2åˆ†ï¼ˆä¸å¤ªæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_politics" value="3"> 3åˆ†ï¼ˆä¸€èˆ¬ï¼‰</label>
                        <label><input type="radio" name="interest_politics" value="4"> 4åˆ†ï¼ˆæ¯”è¾ƒæ„Ÿå…´è¶£ï¼‰</label>
                        <label><input type="radio" name="interest_politics" value="5"> 5åˆ†ï¼ˆéå¸¸æ„Ÿå…´è¶£ï¼‰</label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-prev" onclick="prevStep(1)">ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-next" onclick="nextStep(3)">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥éª¤3ï¼šå­¦ç§‘æˆç»©è¾“å…¥ -->
            <div class="step" id="step3">
                <h2>ç¬¬ä¸‰æ­¥ï¼šå­¦ç§‘æˆç»©</h2>
                <p>è¯·å¡«å†™æœ€è¿‘ä¸¤æ¬¡å¤§è€ƒæˆç»©ï¼ˆç™¾åˆ†åˆ¶ï¼‰ï¼Œå¦‚æœªå‚åŠ è€ƒè¯•ï¼Œè¯·å¡«å†™å¹³æ—¶æˆç»©</p>
                
                <table class="score-table">
                    <thead>
                        <tr>
                            <th>å­¦ç§‘</th>
                            <th>ç¬¬ä¸€æ¬¡æˆç»©</th>
                            <th>ç¬¬äºŒæ¬¡æˆç»©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>è¯­æ–‡</td>
                            <td><input type="number" min="0" max="150" id="chinese1" placeholder="0-150"></td>
                            <td><input type="number" min="0" max="150" id="chinese2" placeholder="0-150"></td>
                        </tr>
                        <tr>
                            <td>æ•°å­¦</td>
                            <td><input type="number" min="0" max="150" id="math1" placeholder="0-150"></td>
                            <td><input type="number" min="0" max="150" id="math2" placeholder="0-150"></td>
                        </tr>
                        <tr>
                            <td>è‹±è¯­</td>
                            <td><input type="number" min="0" max="150" id="english1" placeholder="0-150"></td>
                            <td><input type="number" min="0" max="150" id="english2" placeholder="0-150"></td>
                        </tr>
                        <tr>
                            <td>ç‰©ç†</td>
                            <td><input type="number" min="0" max="100" id="physics1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="physics2" placeholder="0-100"></td>
                        </tr>
                        <tr>
                            <td>å†å²</td>
                            <td><input type="number" min="0" max="100" id="history1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="history2" placeholder="0-100"></td>
                        </tr>
                        <tr>
                            <td>åŒ–å­¦</td>
                            <td><input type="number" min="0" max="100" id="chemistry1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="chemistry2" placeholder="0-100"></td>
                        </tr>
                        <tr>
                            <td>ç”Ÿç‰©</td>
                            <td><input type="number" min="0" max="100" id="biology1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="biology2" placeholder="0-100"></td>
                        </tr>
                        <tr>
                            <td>åœ°ç†</td>
                            <td><input type="number" min="0" max="100" id="geography1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="geography2" placeholder="0-100"></td>
                        </tr>
                        <tr>
                            <td>æ”¿æ²»</td>
                            <td><input type="number" min="0" max="100" id="politics1" placeholder="0-100"></td>
                            <td><input type="number" min="0" max="100" id="politics2" placeholder="0-100"></td>
                        </tr>
                    </tbody>
                </table>
                <div class="error" id="scoreError" style="text-align: center; margin-top: 10px;"></div>
                
                <div class="button-group">
                    <button class="btn btn-prev" onclick="prevStep(2)">ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-next" onclick="nextStep(4)">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥éª¤4ï¼šå­¦ä¹ èƒ½åŠ›ä¸é£æ ¼ -->
            <div class="step" id="step4">
                <h2>ç¬¬å››æ­¥ï¼šå­¦ä¹ èƒ½åŠ›ä¸é£æ ¼</h2>
                
                <div class="question">
                    <p>1. ä½ çš„é€»è¾‘æ¨ç†èƒ½åŠ›å¦‚ä½•ï¼Ÿ</p>
                    <select class="choice" id="ability_logic">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="1">è¾ƒå¼±</option>
                        <option value="2">ä¸€èˆ¬</option>
                        <option value="3">è¾ƒå¼º</option>
                        <option value="4">å¾ˆå¼º</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>2. ä½ çš„è®°å¿†èƒ½åŠ›å¦‚ä½•ï¼Ÿ</p>
                    <select class="choice" id="ability_memory">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="1">è¾ƒå·®</option>
                        <option value="2">ä¸€èˆ¬</option>
                        <option value="3">è¾ƒå¥½</option>
                        <option value="4">å¾ˆå¥½</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>3. ä½ çš„åˆ†æå½’çº³èƒ½åŠ›å¦‚ä½•ï¼Ÿ</p>
                    <select class="choice" id="ability_analysis">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="1">è¾ƒå¼±</option>
                        <option value="2">ä¸€èˆ¬</option>
                        <option value="3">è¾ƒå¼º</option>
                        <option value="4">å¾ˆå¼º</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>4. ä½ çš„è¡¨è¾¾è®ºè¿°èƒ½åŠ›å¦‚ä½•ï¼Ÿ</p>
                    <select class="choice" id="ability_express">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="1">è¾ƒå¼±</option>
                        <option value="2">ä¸€èˆ¬</option>
                        <option value="3">è¾ƒå¼º</option>
                        <option value="4">å¾ˆå¼º</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>5. å½“ä½ é‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼š</p>
                    <select class="choice" id="problem_solving">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="logic">é€šè¿‡é€»è¾‘æ¨ç†é€æ­¥è§£å†³</option>
                        <option value="memory">å›å¿†ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ³•</option>
                        <option value="analysis">åˆ†è§£é—®é¢˜ï¼Œé€ä¸ªåˆ†æ</option>
                        <option value="intuition">å‡­ç›´è§‰å¯»æ‰¾è§£å†³æ–¹æ¡ˆ</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>6. ä½ çš„å­¦ä¹ é£æ ¼ï¼ˆå¯å¤šé€‰ï¼‰ï¼š</p>
                    <div class="checkbox-grid">
                        <label><input type="checkbox" name="learning_style" value="visual"> è§†è§‰å‹ï¼ˆå–œæ¬¢å›¾è¡¨ã€å›¾åƒï¼‰</label>
                        <label><input type="checkbox" name="learning_style" value="auditory"> å¬è§‰å‹ï¼ˆå–œæ¬¢å¬è®²ã€è®¨è®ºï¼‰</label>
                        <label><input type="checkbox" name="learning_style" value="reading"> é˜…è¯»å‹ï¼ˆå–œæ¬¢é˜…è¯»æ–‡å­—ï¼‰</label>
                        <label><input type="checkbox" name="learning_style" value="practice"> å®è·µå‹ï¼ˆå–œæ¬¢åŠ¨æ‰‹æ“ä½œï¼‰</label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-prev" onclick="prevStep(3)">ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-next" onclick="nextStep(5)">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥éª¤5ï¼šèŒä¸šä¸ä¸“ä¸šå€¾å‘ -->
            <div class="step" id="step5">
                <h2>ç¬¬äº”æ­¥ï¼šèŒä¸šä¸ä¸“ä¸šå€¾å‘</h2>
                
                <div class="question">
                    <p>ä½ æ„Ÿå…´è¶£çš„ä¸“ä¸šæ–¹å‘æœ‰å“ªäº›ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰</p>
                    <div class="checkbox-grid">
                        <div class="checkbox-column">
                            <h4>ç†å·¥ç±»</h4>
                            <label><input type="checkbox" name="major" value="engineering"> å·¥ç¨‹ç±»ï¼ˆæœºæ¢°ã€ç”µå­ã€åœŸæœ¨ç­‰ï¼‰</label>
                            <label><input type="checkbox" name="major" value="computer"> è®¡ç®—æœºä¸ä¿¡æ¯æŠ€æœ¯</label>
                            <label><input type="checkbox" name="major" value="medical"> åŒ»å­¦ä¸ç”Ÿç‰©ç§‘å­¦</label>
                            <label><input type="checkbox" name="major" value="science"> ç†å­¦ï¼ˆæ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ç­‰ï¼‰</label>
                        </div>
                        <div class="checkbox-column">
                            <h4>æ–‡å²ç±»</h4>
                            <label><input type="checkbox" name="major" value="law"> æ³•å­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="education"> æ•™è‚²å­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="literature"> è¯­è¨€æ–‡å­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="history"> å†å²å­¦ç±»</label>
                        </div>
                        <div class="checkbox-column">
                            <h4>ç»ç®¡ç±»</h4>
                            <label><input type="checkbox" name="major" value="economics"> ç»æµå­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="management"> ç®¡ç†å­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="finance"> é‡‘èå­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="business"> å·¥å•†ç®¡ç†ç±»</label>
                        </div>
                        <div class="checkbox-column">
                            <h4>å…¶ä»–ç±»</h4>
                            <label><input type="checkbox" name="major" value="art"> è‰ºæœ¯ç±»</label>
                            <label><input type="checkbox" name="major" value="sports"> ä½“è‚²ç±»</label>
                            <label><input type="checkbox" name="major" value="agriculture"> å†œå­¦ç±»</label>
                            <label><input type="checkbox" name="major" value="military"> å†›äº‹å…¬å®‰ç±»</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <p>ä½ æ›´å€¾å‘äºå“ªç§èŒä¸šç±»å‹ï¼Ÿ</p>
                    <select class="choice" id="career_type">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="research">ç ”ç©¶å‹ï¼ˆç§‘ç ”ã€åˆ†æï¼‰</option>
                        <option value="social">ç¤¾ä¼šå‹ï¼ˆæ•™è‚²ã€æœåŠ¡ï¼‰</option>
                        <option value="enterprise">ä¼ä¸šå‹ï¼ˆç®¡ç†ã€åˆ›ä¸šï¼‰</option>
                        <option value="artistic">è‰ºæœ¯å‹ï¼ˆåˆ›é€ ã€è®¾è®¡ï¼‰</option>
                        <option value="conventional">å¸¸è§„å‹ï¼ˆäº‹åŠ¡ã€è¡Œæ”¿ï¼‰</option>
                        <option value="realistic">å®é™…å‹ï¼ˆæŠ€æœ¯ã€æ“ä½œï¼‰</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>å®¶äººå¯¹ä½ é€‰ç§‘çš„å»ºè®®æ˜¯ï¼Ÿ</p>
                    <select class="choice" id="family_advice">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="support">æ”¯æŒæˆ‘çš„é€‰æ‹©</option>
                        <option value="advise">ç»™å‡ºå»ºè®®ä½†å°Šé‡æˆ‘çš„å†³å®š</option>
                        <option value="expect">æœ‰æ˜ç¡®çš„æœŸæœ›å’Œè¦æ±‚</option>
                        <option value="undecided">ä¸å¹²æ¶‰ï¼Œç”±æˆ‘è‡ªå·±å†³å®š</option>
                    </select>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-prev" onclick="prevStep(4)">ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-submit" onclick="calculateResults()">æŸ¥çœ‹æµ‹è¯„ç»“æœ</button>
                </div>
            </div>
            
            <!-- æ­¥éª¤6ï¼šç»“æœé¡µé¢ -->
            <div class="step" id="step6">
                <!-- ç»“æœå†…å®¹å°†åœ¨calculateResults()ä¸­åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>

        <footer>
            <p>Â© 2024 é«˜ä¸­åˆ†ç§‘æµ‹è¯„ç³»ç»Ÿ | æœ¬æµ‹è¯„ç»“æœä»…ä¾›å‚è€ƒï¼Œè¯·ç»“åˆä¸ªäººå®é™…æƒ…å†µå’Œè€å¸ˆã€å®¶é•¿å»ºè®®åšå‡ºæœ€ç»ˆå†³å®š</p>
        </footer>
    </div>

    <script>
    // ==================== ä¸»ç¨‹åºå¼€å§‹ ====================
    (function() {
        'use strict';
        
        // æ•°æ®å­˜å‚¨å¯¹è±¡
        var userData = {
            personalInfo: {},
            interests: {},
            scores: {},
            abilities: {},
            career: {},
            results: {}
        };

        // å½“å‰æ­¥éª¤
        var currentStep = 1;
        var totalSteps = 5;

        // ç­‰å¾…DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        function init() {
            console.log('å¼€å§‹åˆå§‹åŒ–æµ‹è¯„ç³»ç»Ÿ...');
            updateProgress();
            loadSavedData();
            initThemeToggle();
            
            // æ·»åŠ æˆç»©è¾“å…¥éªŒè¯
            var scoreInputs = document.querySelectorAll('input[type="number"]');
            for (var i = 0; i < scoreInputs.length; i++) {
                scoreInputs[i].addEventListener('input', function() {
                    validateScore(this);
                });
            }
            
            console.log('é«˜ä¸­åˆ†ç§‘æ„å‘æµ‹è¯„ç³»ç»Ÿå·²åŠ è½½å®Œæˆï¼');
        }

        // ==================== ä¸»é¢˜åˆ‡æ¢ ====================
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            var themeBtn = document.getElementById('themeToggle');
            if (document.body.classList.contains('dark-theme')) {
                themeBtn.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
            } else {
                themeBtn.textContent = 'ğŸŒ™';
                localStorage.setItem('theme', 'light');
            }
        }

        function initThemeToggle() {
            var savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                document.getElementById('themeToggle').textContent = 'â˜€ï¸';
            }
        }

        // ==================== è¿›åº¦æ§åˆ¶ ====================
        function updateProgress() {
            var percentage = ((currentStep - 1) / (totalSteps - 1)) * 100;
            var progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = percentage + '%';
            }
            
            // æ›´æ–°æ­¥éª¤ç‚¹çŠ¶æ€
            var stepDots = document.querySelectorAll('.step-dot');
            for (var i = 0; i < stepDots.length; i++) {
                var stepNum = i + 1;
                if (stepNum < currentStep) {
                    stepDots[i].classList.add('completed');
                    stepDots[i].classList.remove('active');
                } else if (stepNum === currentStep) {
                    stepDots[i].classList.add('active');
                    stepDots[i].classList.remove('completed');
                } else {
                    stepDots[i].classList.remove('active', 'completed');
                }
            }
        }

        function showStep(step) {
            var steps = document.querySelectorAll('.step');
            for (var i = 0; i < steps.length; i++) {
                steps[i].classList.remove('active');
            }
            
            var currentStepEl = document.getElementById('step' + step);
            if (currentStepEl) {
                currentStepEl.classList.add('active');
            }
            
            currentStep = step;
            updateProgress();
            window.scrollTo(0, 0);
        }

        // ==================== æ­¥éª¤å¯¼èˆª ====================
        function nextStep(next) {
            // ä¿å­˜å½“å‰æ­¥éª¤æ•°æ®
            saveCurrentStepData();
            showStep(next);
        }

        function prevStep(prev) {
            saveCurrentStepData();
            showStep(prev);
        }

        // ==================== è¡¨å•éªŒè¯ ====================
        function validateStep1() {
            var grade = document.getElementById('grade').value;
            if (!grade) {
                document.getElementById('gradeError').style.display = 'block';
                document.getElementById('grade').classList.add('input-error');
                return false;
            }
            document.getElementById('gradeError').style.display = 'none';
            document.getElementById('grade').classList.remove('input-error');
            return true;
        }

        function validateStep2() {
            var requiredRadios = [
                'interest_physics', 'interest_history', 'interest_chemistry',
                'interest_biology', 'interest_geography', 'interest_politics'
            ];
            
            var isValid = true;
            for (var i = 0; i < requiredRadios.length; i++) {
                var name = requiredRadios[i];
                var radios = document.getElementsByName(name);
                var isChecked = false;
                
                for (var j = 0; j < radios.length; j++) {
                    if (radios[j].checked) {
                        isChecked = true;
                        break;
                    }
                }
                
                if (!isChecked) {
                    isValid = false;
                    if (radios.length > 0) {
                        var question = radios[0].closest('.question');
                        if (question) {
                            question.style.borderLeftColor = '#e74c3c';
                        }
                    }
                }
            }
            
            if (!isValid) {
                alert('è¯·å®Œæˆæ‰€æœ‰å­¦ç§‘å…´è¶£è¯„ä¼°ï¼');
            }
            return isValid;
        }

        function validateStep3() {
            var requiredScores = [
                'chinese1', 'chinese2', 'math1', 'math2', 'english1', 'english2',
                'physics1', 'physics2', 'history1', 'history2', 'chemistry1', 'chemistry2',
                'biology1', 'biology2', 'geography1', 'geography2', 'politics1', 'politics2'
            ];
            
            var isValid = true;
            var scoreError = document.getElementById('scoreError');
            scoreError.textContent = '';
            scoreError.style.display = 'none';
            
            for (var i = 0; i < requiredScores.length; i++) {
                var id = requiredScores[i];
                var input = document.getElementById(id);
                var value = parseInt(input.value) || 0;
                var max = id.indexOf('chinese') !== -1 || id.indexOf('math') !== -1 || id.indexOf('english') !== -1 ? 150 : 100;
                
                if (isNaN(value) || value < 0 || value > max) {
                    isValid = false;
                    input.classList.add('input-error');
                    scoreError.textContent = 'è¯·å¡«å†™æœ‰æ•ˆçš„æˆç»©ï¼ˆ0-150åˆ†ï¼‰';
                    scoreError.style.display = 'block';
                } else {
                    input.classList.remove('input-error');
                }
            }
            
            return isValid;
        }

        function validateScore(input) {
            var value = parseInt(input.value) || 0;
            var max = input.id.indexOf('chinese') !== -1 || input.id.indexOf('math') !== -1 || input.id.indexOf('english') !== -1 ? 150 : 100;
            
            if (!isNaN(value) && value >= 0 && value <= max) {
                input.classList.remove('input-error');
                var scoreError = document.getElementById('scoreError');
                if (scoreError) {
                    scoreError.style.display = 'none';
                }
            } else if (input.value !== '') {
                input.classList.add('input-error');
            }
        }

        function validateStep4() {
            var requiredSelects = ['ability_logic', 'ability_memory', 'ability_analysis', 'ability_express', 'problem_solving'];
            var isValid = true;
            
            for (var i = 0; i < requiredSelects.length; i++) {
                var id = requiredSelects[i];
                var select = document.getElementById(id);
                if (!select.value) {
                    isValid = false;
                    select.classList.add('input-error');
                } else {
                    select.classList.remove('input-error');
                }
            }
            
            if (!isValid) {
                alert('è¯·å®Œæˆæ‰€æœ‰å­¦ä¹ èƒ½åŠ›è¯„ä¼°ï¼');
            }
            return isValid;
        }

        function validateStep5() {
            var majorCheckboxes = document.getElementsByName('major');
            var careerType = document.getElementById('career_type').value;
            var familyAdvice = document.getElementById('family_advice').value;
            
            var isValid = true;
            
            // æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†è‡³å°‘ä¸€ä¸ªä¸“ä¸šæ–¹å‘
            var majors = false;
            for (var i = 0; i < majorCheckboxes.length; i++) {
                if (majorCheckboxes[i].checked) {
                    majors = true;
                    break;
                }
            }
            
            if (!majors) {
                isValid = false;
                var checkboxGrid = document.querySelector('.checkbox-grid');
                if (checkboxGrid) {
                    checkboxGrid.style.border = '2px solid #e74c3c';
                }
            } else {
                var checkboxGrid = document.querySelector('.checkbox-grid');
                if (checkboxGrid) {
                    checkboxGrid.style.border = '2px solid #e0e6ed';
                }
            }
            
            if (!careerType) {
                isValid = false;
                document.getElementById('career_type').classList.add('input-error');
            } else {
                document.getElementById('career_type').classList.remove('input-error');
            }
            
            if (!familyAdvice) {
                isValid = false;
                document.getElementById('family_advice').classList.add('input-error');
            } else {
                document.getElementById('family_advice').classList.remove('input-error');
            }
            
            if (!isValid) {
                alert('è¯·å®Œæˆæ‰€æœ‰èŒä¸šä¸ä¸“ä¸šå€¾å‘é—®é¢˜ï¼');
            }
            return isValid;
        }

        // ==================== æ•°æ®ä¿å­˜ ====================
        function saveCurrentStepData() {
            switch(currentStep) {
                case 1:
                    userData.personalInfo = {
                        name: document.getElementById('name').value,
                        grade: document.getElementById('grade').value,
                        province: document.getElementById('province').value,
                        mode: document.getElementById('mode').value
                    };
                    break;
                    
                case 2:
                    userData.interests = {
                        physics: parseInt(getCheckedRadioValue('interest_physics') || 3),
                        history: parseInt(getCheckedRadioValue('interest_history') || 3),
                        chemistry: parseInt(getCheckedRadioValue('interest_chemistry') || 3),
                        biology: parseInt(getCheckedRadioValue('interest_biology') || 3),
                        geography: parseInt(getCheckedRadioValue('interest_geography') || 3),
                        politics: parseInt(getCheckedRadioValue('interest_politics') || 3)
                    };
                    break;
                    
                case 3:
                    userData.scores = {
                        chinese: [parseInt(document.getElementById('chinese1').value) || 0, parseInt(document.getElementById('chinese2').value) || 0],
                        math: [parseInt(document.getElementById('math1').value) || 0, parseInt(document.getElementById('math2').value) || 0],
                        english: [parseInt(document.getElementById('english1').value) || 0, parseInt(document.getElementById('english2').value) || 0],
                        physics: [parseInt(document.getElementById('physics1').value) || 0, parseInt(document.getElementById('physics2').value) || 0],
                        history: [parseInt(document.getElementById('history1').value) || 0, parseInt(document.getElementById('history2').value) || 0],
                        chemistry: [parseInt(document.getElementById('chemistry1').value) || 0, parseInt(document.getElementById('chemistry2').value) || 0],
                        biology: [parseInt(document.getElementById('biology1').value) || 0, parseInt(document.getElementById('biology2').value) || 0],
                        geography: [parseInt(document.getElementById('geography1').value) || 0, parseInt(document.getElementById('geography2').value) || 0],
                        politics: [parseInt(document.getElementById('politics1').value) || 0, parseInt(document.getElementById('politics2').value) || 0]
                    };
                    break;
                    
                case 4:
                    var learningStyle = [];
                    var styleCheckboxes = document.querySelectorAll('input[name="learning_style"]:checked');
                    for (var i = 0; i < styleCheckboxes.length; i++) {
                        learningStyle.push(styleCheckboxes[i].value);
                    }
                    
                    userData.abilities = {
                        logic: parseInt(document.getElementById('ability_logic').value) || 2,
                        memory: parseInt(document.getElementById('ability_memory').value) || 2,
                        analysis: parseInt(document.getElementById('ability_analysis').value) || 2,
                        express: parseInt(document.getElementById('ability_express').value) || 2,
                        problemSolving: document.getElementById('problem_solving').value || 'logic',
                        learningStyle: learningStyle
                    };
                    break;
                    
                case 5:
                    var majors = [];
                    var majorCheckboxes = document.querySelectorAll('input[name="major"]:checked');
                    for (var i = 0; i < majorCheckboxes.length; i++) {
                        majors.push(majorCheckboxes[i].value);
                    }
                    
                    userData.career = {
                        majors: majors,
                        careerType: document.getElementById('career_type').value || 'research',
                        familyAdvice: document.getElementById('family_advice').value || 'support'
                    };
                    break;
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            try {
                localStorage.setItem('subjectSelectionData', JSON.stringify(userData));
                console.log('æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨');
            } catch (e) {
                console.log('æœ¬åœ°å­˜å‚¨å¤±è´¥ï¼š', e);
            }
        }

        function getCheckedRadioValue(name) {
            var radios = document.getElementsByName(name);
            for (var i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    return radios[i].value;
                }
            }
            return null;
        }

        function loadSavedData() {
            try {
                var savedData = localStorage.getItem('subjectSelectionData');
                if (savedData) {
                    userData = JSON.parse(savedData);
                    
                    // å¡«å……è¡¨å•æ•°æ®
                    if (userData.personalInfo) {
                        document.getElementById('name').value = userData.personalInfo.name || '';
                        document.getElementById('grade').value = userData.personalInfo.grade || '';
                        document.getElementById('province').value = userData.personalInfo.province || '';
                        document.getElementById('mode').value = userData.personalInfo.mode || '3+1+2';
                    }
                    console.log('å·²åŠ è½½ä¿å­˜çš„æ•°æ®');
                }
            } catch (e) {
                console.log('æ— æ³•åŠ è½½ä¿å­˜çš„æ•°æ®');
            }
        }

        // ==================== è®¡ç®—ç»“æœ ====================
        function calculateAverage(scores) {
            if (!scores || scores.length === 0) return 75;
            var sum = 0;
            for (var i = 0; i < scores.length; i++) {
                sum += scores[i];
            }
            return sum / scores.length;
        }

        function calculateCombinationScore(combo) {
            var weights = {
                'ç‰©åŒ–ç”Ÿ': { physics: 0.4, chemistry: 0.3, biology: 0.3 },
                'ç‰©åŒ–åœ°': { physics: 0.4, chemistry: 0.3, geography: 0.3 },
                'ç‰©åŒ–æ”¿': { physics: 0.4, chemistry: 0.3, politics: 0.3 },
                'å†æ”¿åœ°': { history: 0.4, politics: 0.3, geography: 0.3 },
                'å†æ”¿ç”Ÿ': { history: 0.4, politics: 0.3, biology: 0.3 }
            };
            
            var comboWeights = weights[combo];
            var score = 0;
            
            for (var subject in comboWeights) {
                if (comboWeights.hasOwnProperty(subject)) {
                    var interest = userData.interests[subject] || 3;
                    var performance = calculateAverage(userData.scores[subject] || [75, 75]);
                    var interestScore = interest * 20; // è½¬æ¢ä¸º20-100åˆ†
                    var performanceScore = performance;
                    
                    // å…´è¶£å 40%ï¼Œæˆç»©å 60%
                    var subjectScore = interestScore * 0.4 + performanceScore * 0.6;
                    score += subjectScore * comboWeights[subject];
                }
            }
            
            return Math.min(Math.round(score), 100);
        }

        function calculateDirectionScores() {
            // è®¡ç®—ç‰©ç†æ–¹å‘å¾—åˆ†
            var physicsScore = {
                interest: (userData.interests.physics || 3) * 20,
                ability: ((userData.abilities.logic || 2) * 25 + (userData.abilities.analysis || 2) * 25) / 2,
                performance: calculateAverage(userData.scores.physics || [75, 75]),
                total: 0
            };
            physicsScore.total = Math.round(
                physicsScore.interest * 0.3 + 
                physicsScore.ability * 0.3 + 
                physicsScore.performance * 0.4
            );
            
            // è®¡ç®—å†å²æ–¹å‘å¾—åˆ†
            var historyScore = {
                interest: (userData.interests.history || 3) * 20,
                ability: ((userData.abilities.memory || 2) * 25 + (userData.abilities.express || 2) * 25) / 2,
                performance: calculateAverage(userData.scores.history || [75, 75]),
                total: 0
            };
            historyScore.total = Math.round(
                historyScore.interest * 0.3 + 
                historyScore.ability * 0.3 + 
                historyScore.performance * 0.4
            );
            
            return { physicsScore: physicsScore, historyScore: historyScore };
        }

        function getCombinationDescription(combo) {
            var descriptions = {
                'ç‰©åŒ–ç”Ÿ': 'ä¼ ç»Ÿç†ç§‘ç»„åˆï¼Œä¸“ä¸šè¦†ç›–é¢æœ€å¹¿ï¼Œé€‚åˆåŒ»å­¦ã€ç”Ÿç‰©ç§‘å­¦ã€åŒ–å­¦åŒ–å·¥ã€ææ–™ç§‘å­¦ç­‰ä¸“ä¸šã€‚å­¦ä¹ éš¾åº¦è¾ƒå¤§ï¼Œéœ€è¦è¾ƒå¼ºçš„é€»è¾‘æ€ç»´å’Œå®éªŒèƒ½åŠ›ã€‚',
                'ç‰©åŒ–åœ°': 'ç†ç§‘ç»„åˆï¼Œé€‚åˆåœ°ç†ä¿¡æ¯ç§‘å­¦ã€ç¯å¢ƒå·¥ç¨‹ã€åœ°è´¨å­¦ã€æµ‹ç»˜å·¥ç¨‹ç­‰ä¸“ä¸šã€‚å…·æœ‰æ–‡ç†äº¤å‰ç‰¹ç‚¹ï¼Œéœ€è¦ä¸€å®šçš„ç©ºé—´æƒ³è±¡èƒ½åŠ›ã€‚',
                'ç‰©åŒ–æ”¿': 'æ–‡ç†ç»“åˆç»„åˆï¼Œé€‚åˆå…¬å®‰æŠ€æœ¯ã€æ”¿æ²»å­¦ã€å›½é™…å…³ç³»ã€å·¥ç¨‹ç®¡ç†ç­‰ä¸“ä¸šã€‚å¯æŠ¥è€ƒå†›äº‹ã€å…¬å®‰ç±»é™¢æ ¡ï¼Œéœ€è¦è¾ƒå¼ºçš„ç»¼åˆèƒ½åŠ›ã€‚',
                    'å†æ”¿åœ°': 'ä¼ ç»Ÿæ–‡ç§‘ç»„åˆï¼Œé€‚åˆæ³•å­¦ã€ç¤¾ä¼šå­¦ã€ç®¡ç†å­¦ã€æ–°é—»ä¼ æ’­ã€å†å²å­¦ç­‰ä¸“ä¸šã€‚æ³¨é‡äººæ–‡ç´ å…»å’Œæ€è¾¨èƒ½åŠ›åŸ¹å…»ã€‚',
                    'å†æ”¿ç”Ÿ': 'æ–‡ç†äº¤å‰ç»„åˆï¼Œé€‚åˆå¿ƒç†å­¦ã€æ•™è‚²å­¦ã€å…¬å…±å«ç”Ÿã€ç¤¾ä¼šå·¥ä½œç­‰ä¸“ä¸šã€‚å…·æœ‰è·¨å­¦ç§‘ä¼˜åŠ¿ï¼Œå­¦ä¹ éš¾åº¦ç›¸å¯¹é€‚ä¸­ã€‚'
                };
                return descriptions[combo] || 'è¯¥ç»„åˆå…·æœ‰ä¸€å®šçš„ç‰¹è‰²å’Œä¼˜åŠ¿ã€‚';
            }

            function analyzeStrengths() {
                var strengths = [];
                var interests = userData.interests;
                var scores = userData.scores;
                
                // åˆ†æå…´è¶£ä¼˜åŠ¿
                var interestEntries = [];
                for (var subject in interests) {
                    if (interests.hasOwnProperty(subject)) {
                        interestEntries.push([subject, interests[subject]]);
                    }
                }
                
                // ç®€å•æ’åº
                interestEntries.sort(function(a, b) {
                    return b[1] - a[1];
                });
                
                for (var i = 0; i < Math.min(2, interestEntries.length); i++) {
                    var subject = interestEntries[i][0];
                    var score = interestEntries[i][1];
                    if (score >= 4) {
                        strengths.push('å¯¹' + getSubjectName(subject) + 'æœ‰æµ“åšå…´è¶£ï¼ˆ' + score + 'åˆ†ï¼‰');
                    }
                }
                
                // åˆ†ææˆç»©ä¼˜åŠ¿
                for (var subject in scores) {
                    if (scores.hasOwnProperty(subject)) {
                        var avg = calculateAverage(scores[subject]);
                        if (avg >= 85) {
                            strengths.push(getSubjectName(subject) + 'æˆç»©ä¼˜ç§€ï¼ˆå¹³å‡' + avg.toFixed(1) + 'åˆ†ï¼‰');
                        }
                    }
                }
                
                // åˆ†æèƒ½åŠ›ä¼˜åŠ¿
                var abilities = userData.abilities;
                if (abilities.logic >= 3) strengths.push('é€»è¾‘æ€ç»´èƒ½åŠ›è¾ƒå¼º');
                if (abilities.memory >= 3) strengths.push('è®°å¿†èƒ½åŠ›è¾ƒå¥½');
                if (abilities.analysis >= 3) strengths.push('åˆ†æå½’çº³èƒ½åŠ›çªå‡º');
                if (abilities.express >= 3) strengths.push('è¡¨è¾¾è®ºè¿°èƒ½åŠ›è‰¯å¥½');
                
                return strengths.length > 0 ? strengths : ['å„ç§‘è¡¨ç°å‡è¡¡ï¼Œæœ‰è¾ƒå¥½çš„ç»¼åˆåŸºç¡€'];
            }

            function analyzeWeaknesses() {
                var weaknesses = [];
                var interests = userData.interests;
                var scores = userData.scores;
                
                // åˆ†æå…´è¶£ä¸è¶³
                for (var subject in interests) {
                    if (interests.hasOwnProperty(subject)) {
                        if (interests[subject] <= 2) {
                            weaknesses.push('å¯¹' + getSubjectName(subject) + 'å…´è¶£ä¸€èˆ¬ï¼Œå¯èƒ½éœ€è¦æ›´å¤šæ—¶é—´åŸ¹å…»å…´è¶£');
                        }
                    }
                }
                
                // åˆ†ææˆç»©çŸ­æ¿
                for (var subject in scores) {
                    if (scores.hasOwnProperty(subject)) {
                        var avg = calculateAverage(scores[subject]);
                        var scoreArray = scores[subject];
                        if (avg < 70 && scoreArray[0] > 0 && scoreArray[1] > 0) {
                            weaknesses.push(getSubjectName(subject) + 'åŸºç¡€æœ‰å¾…åŠ å¼ºï¼ˆå¹³å‡' + avg.toFixed(1) + 'åˆ†ï¼‰');
                        }
                    }
                }
                
                // åˆ†æèƒ½åŠ›çŸ­æ¿
                var abilities = userData.abilities;
                if (abilities.logic <= 2) weaknesses.push('é€»è¾‘æ€ç»´èƒ½åŠ›æœ‰å¾…æå‡ï¼Œå¯é€šè¿‡ç»ƒä¹ é€»è¾‘é¢˜åŠ å¼º');
                if (abilities.memory <= 2) weaknesses.push('è®°å¿†èƒ½åŠ›éœ€åŠ å¼ºï¼Œå¯å°è¯•å¤šç§è®°å¿†æ–¹æ³•');
                
                return weaknesses.length > 0 ? weaknesses : ['æ— æ˜æ˜¾çŸ­æ¿ï¼Œç»§ç»­ä¿æŒå½“å‰å­¦ä¹ çŠ¶æ€'];
            }

            function getSubjectName(subject) {
                var nameMap = {
                    'physics': 'ç‰©ç†',
                    'history': 'å†å²',
                    'chemistry': 'åŒ–å­¦',
                    'biology': 'ç”Ÿç‰©',
                    'geography': 'åœ°ç†',
                    'politics': 'æ”¿æ²»',
                    'chinese': 'è¯­æ–‡',
                    'math': 'æ•°å­¦',
                    'english': 'è‹±è¯­'
                };
                return nameMap[subject] || subject;
            }

            function getDirectionExplanation(direction, physicsScore, historyScore) {
                if (direction === 'ç‰©ç†æ–¹å‘') {
                    return 'ä½ çš„é€»è¾‘æ€ç»´å’Œåˆ†æèƒ½åŠ›è¾ƒä¸ºçªå‡ºï¼Œåœ¨ç†å·¥ç§‘å­¦ä¹ ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚ç‰©ç†æ–¹å‘ä¸“ä¸šè¦†ç›–é¢å¹¿ï¼Œå°±ä¸šå‰æ™¯å¹¿é˜”ï¼Œé€‚åˆå¯¹ç§‘å­¦æŠ€æœ¯æœ‰æµ“åšå…´è¶£çš„å­¦ç”Ÿã€‚';
                } else if (direction === 'å†å²æ–¹å‘') {
                    return 'ä½ çš„è®°å¿†å’Œè¡¨è¾¾èƒ½åŠ›è¾ƒä¸ºçªå‡ºï¼Œåœ¨äººæ–‡ç¤¾ç§‘å­¦ä¹ ä¸Šæ›´æœ‰ä¼˜åŠ¿ã€‚å†å²æ–¹å‘æ³¨é‡äººæ–‡ç´ å…»åŸ¹å…»ï¼Œé€‚åˆå¯¹ç¤¾ä¼šäººæ–‡æœ‰æµ“åšå…´è¶£çš„å­¦ç”Ÿã€‚';
                } else {
                    return 'ä½ çš„æ–‡ç†ç§‘èƒ½åŠ›è¾ƒä¸ºå‡è¡¡ï¼Œå…·æœ‰è·¨å­¦ç§‘å­¦ä¹ æ½œåŠ›ã€‚å»ºè®®ç»“åˆä¸ªäººå…´è¶£ã€èŒä¸šè§„åˆ’å’Œå­¦æ ¡èµ„æºä¼˜åŠ¿è¿›è¡Œé€‰æ‹©ï¼Œä¹Ÿå¯è€ƒè™‘æ–‡ç†ç»“åˆçš„ç»„åˆã€‚';
                }
            }

            function calculateResults() {
                // éªŒè¯æœ€åä¸€æ­¥
                if (!validateStep5()) {
                    return;
                }
                
                // ä¿å­˜æœ€åä¸€æ­¥æ•°æ®
                saveCurrentStepData();
                
                // è®¡ç®—æ–¹å‘å¾—åˆ†
                var directionScores = calculateDirectionScores();
                
                // è®¡ç®—å„ç»„åˆå¾—åˆ†
                var combinations = ['ç‰©åŒ–ç”Ÿ', 'ç‰©åŒ–åœ°', 'ç‰©åŒ–æ”¿', 'å†æ”¿åœ°', 'å†æ”¿ç”Ÿ'];
                var combinationScores = {};
                for (var i = 0; i < combinations.length; i++) {
                    var combo = combinations[i];
                    combinationScores[combo] = calculateCombinationScore(combo);
                }
                
                // æ’åºç»„åˆ
                var combinationEntries = [];
                for (var combo in combinationScores) {
                    if (combinationScores.hasOwnProperty(combo)) {
                        combinationEntries.push([combo, combinationScores[combo]]);
                    }
                }
                
                combinationEntries.sort(function(a, b) {
                    return b[1] - a[1];
                });
                
                var combinationRank = [];
                for (var i = 0; i < combinationEntries.length; i++) {
                    combinationRank.push({
                        combo: combinationEntries[i][0],
                        score: combinationEntries[i][1],
                        rank: i + 1
                    });
                }
                
                // ç¡®å®šæ¨èæ–¹å‘
                var recommendation = '';
                var diff = directionScores.physicsScore.total - directionScores.historyScore.total;
                
                if (diff > 10) {
                    recommendation = 'ç‰©ç†æ–¹å‘';
                } else if (diff < -10) {
                    recommendation = 'å†å²æ–¹å‘';
                } else {
                    recommendation = 'æ–‡ç†å‡è¡¡';
                }
                
                // ç”Ÿæˆç»“æœ
                userData.results = {
                    recommendation: recommendation,
                    directionScores: directionScores,
                    combinationRank: combinationRank,
                    strengths: analyzeStrengths(),
                    weaknesses: analyzeWeaknesses()
                };
                
                // æ˜¾ç¤ºç»“æœ
                showResults();
            }

            function showResults() {
                var results = userData.results;
                var recommendation = results.recommendation;
                var directionScores = results.directionScores;
                var combinationRank = results.combinationRank;
                var strengths = results.strengths;
                var weaknesses = results.weaknesses;
                
                var physicsTotal = directionScores.physicsScore.total;
                var historyTotal = directionScores.historyScore.total;
                var directionClass = recommendation === 'ç‰©ç†æ–¹å‘' ? 'physics' : 
                                   recommendation === 'å†å²æ–¹å‘' ? 'history' : 'balanced';
                
                // ç”Ÿæˆç»„åˆåˆ—è¡¨HTML
                var combinationsHTML = '';
                for (var i = 0; i < combinationRank.length; i++) {
                    var item = combinationRank[i];
                    combinationsHTML += `
                        <div class="combination-item rank-${item.rank}">
                            <div class="rank">ç¬¬${item.rank}å</div>
                            <div class="combo-name">${item.combo}</div>
                            <div class="combo-score">é€‚é…åº¦ï¼š${item.score}åˆ†</div>
                            <div class="combo-desc">${getCombinationDescription(item.combo)}</div>
                        </div>
                    `;
                }
                
                // ç”Ÿæˆä¼˜åŠ¿åˆ—è¡¨HTML
                var strengthsHTML = '';
                for (var i = 0; i < strengths.length; i++) {
                    strengthsHTML += '<li>' + strengths[i] + '</li>';
                }
                
                // ç”Ÿæˆæ³¨æ„äº‹é¡¹åˆ—è¡¨HTML
                var weaknessesHTML = '';
                for (var i = 0; i < weaknesses.length; i++) {
                    weaknessesHTML += '<li>' + weaknesses[i] + '</li>';
                }
                
                var resultHTML = `
                    <div class="results-container">
                        <h2>æµ‹è¯„ç»“æœåˆ†æ</h2>
                        
                        <div class="result-summary">
                            <h3>ç»¼åˆå»ºè®®</h3>
                            <div class="recommendation-card ${directionClass}">
                                <h4>æ¨èæ–¹å‘ï¼š${recommendation}</h4>
                                <p>${getDirectionExplanation(recommendation, physicsTotal, historyTotal)}</p>
                                <p>å¾—åˆ†å¯¹æ¯”ï¼šç‰©ç†æ–¹å‘ ${physicsTotal}åˆ† vs å†å²æ–¹å‘ ${historyTotal}åˆ†</p>
                            </div>
                        </div>
                        
                        <div class="score-comparison">
                            <h3>æ–¹å‘å¾—åˆ†å¯¹æ¯”</h3>
                            <div class="score-bars">
                                <div class="score-bar">
                                    <div class="bar-label">ç‰©ç†æ–¹å‘</div>
                                    <div class="bar-container">
                                        <div class="bar-fill physics" id="physicsBar" style="height: ${physicsTotal}%">
                                            <div class="bar-value">${physicsTotal}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="score-bar">
                                    <div class="bar-label">å†å²æ–¹å‘</div>
                                    <div class="bar-container">
                                        <div class="bar-fill history" id="historyBar" style="height: ${historyTotal}%">
                                            <div class="bar-value">${historyTotal}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="combinations-list">
                            <h3>é€‰ç§‘ç»„åˆæ¨èæ’å</h3>
                            ${combinationsHTML}
                        </div>
                        
                        <div class="analysis-section">
                            <h3>ä½ çš„ä¼˜åŠ¿</h3>
                            <ul>${strengthsHTML}</ul>
                        </div>
                        
                        <div class="analysis-section">
                            <h3>æ³¨æ„äº‹é¡¹</h3>
                            <ul>${weaknessesHTML}</ul>
                        </div>
                        
                        <div class="result-actions">
                            <button class="result-btn" id="printBtn" onclick="window.print()">æ‰“å°ç»“æœ</button>
                            <button class="result-btn" id="restartBtn" onclick="restartAssessment()">é‡æ–°æµ‹è¯„</button>
                            <button class="result-btn" id="saveBtn" onclick="saveResults()">ä¿å­˜ç»“æœ</button>
                        </div>
                        
                        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; font-size: 0.9em; color: #666;">
                            <h4>ä½¿ç”¨è¯´æ˜ï¼š</h4>
                            <p>1. æœ¬æµ‹è¯„ç»“æœåŸºäºæ‚¨çš„è¾“å…¥æ•°æ®è®¡ç®—å¾—å‡ºï¼Œä»…ä¾›å‚è€ƒã€‚</p>
                            <p>2. å»ºè®®ç»“åˆä¸ªäººå…´è¶£ã€å­¦æ ¡èµ„æºå’Œè€å¸ˆå»ºè®®åšå‡ºæœ€ç»ˆå†³å®šã€‚</p>
                            <p>3. æ‚¨å¯ä»¥é€šè¿‡"ä¿å­˜ç»“æœ"æŒ‰é’®å°†æœ¬æ¬¡æµ‹è¯„ç»“æœä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
                            <p>4. å¦‚éœ€è°ƒæ•´ï¼Œå¯ç‚¹å‡»"é‡æ–°æµ‹è¯„"è¿”å›ä¿®æ”¹ã€‚</p>
                        </div>
                    </div>
                `;
                
                // åˆ›å»ºç»“æœæ­¥éª¤
                var step6 = document.getElementById('step6');
                if (!step6) {
                    step6 = document.createElement('div');
                    step6.id = 'step6';
                    step6.className = 'step';
                    document.getElementById('app').appendChild(step6);
                }
                step6.innerHTML = resultHTML;
                
                // æ˜¾ç¤ºç»“æœæ­¥éª¤
                showStep(6);
                
                // åŠ¨ç”»æ•ˆæœ
                setTimeout(function() {
                    var physicsBar = document.getElementById('physicsBar');
                    var historyBar = document.getElementById('historyBar');
                    if (physicsBar) physicsBar.style.height = physicsTotal + '%';
                    if (historyBar) historyBar.style.height = historyTotal + '%';
                }, 100);
            }

            // ==================== å·¥å…·å‡½æ•° ====================
            function saveResults() {
                var dataStr = JSON.stringify(userData, null, 2);
                var dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                var exportFileDefaultName = 'åˆ†ç§‘æµ‹è¯„ç»“æœ_' + new Date().toISOString().slice(0,10) + '.json';
                
                var linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                alert('ç»“æœå·²ä¿å­˜ä¸ºJSONæ–‡ä»¶ï¼');
            }

            function restartAssessment() {
                if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹æµ‹è¯„å—ï¼Ÿæ‰€æœ‰æ•°æ®å°†è¢«æ¸…é™¤ã€‚')) {
                    userData = {
                        personalInfo: {},
                        interests: {},
                        scores: {},
                        abilities: {},
                        career: {},
                        results: {}
                    };
                    
                    // æ¸…é™¤è¡¨å•æ•°æ®
                    var forms = document.querySelectorAll('input, select, textarea');
                    for (var i = 0; i < forms.length; i++) {
                        if (forms[i].type === 'text' || forms[i].type === 'number') {
                            forms[i].value = '';
                        } else if (forms[i].type === 'radio' || forms[i].type === 'checkbox') {
                            forms[i].checked = false;
                        } else if (forms[i].tagName === 'SELECT') {
                            forms[i].selectedIndex = 0;
                        }
                    }
                    
                    // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                    localStorage.removeItem('subjectSelectionData');
                    
                    // é‡ç½®åˆ°ç¬¬ä¸€æ­¥
                    showStep(1);
                    
                    alert('æµ‹è¯„å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°å¼€å§‹ï¼');
                }
            }

            // ==================== å…¨å±€å‡½æ•°å¯¼å‡º ====================
            window.nextStep = nextStep;
            window.prevStep = prevStep;
            window.calculateResults = calculateResults;
            window.toggleTheme = toggleTheme;
            window.restartAssessment = restartAssessment;
            window.saveResults = saveResults;

            // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
            document.addEventListener('keydown', function(event) {
                // å›è½¦é”®å‰è¿›
                if (event.key === 'Enter' && event.target.tagName !== 'TEXTAREA') {
                    event.preventDefault();
                    if (currentStep < 5) {
                        nextStep(currentStep + 1);
                    } else if (currentStep === 5) {
                        calculateResults();
                    }
                }
                
                // å·¦å³ç®­å¤´åˆ‡æ¢æ­¥éª¤
                if (event.key === 'ArrowLeft' && currentStep > 1) {
                    prevStep(currentStep - 1);
                }
                if (event.key === 'ArrowRight' && currentStep < 6) {
                    if (currentStep < 5) {
                        nextStep(currentStep + 1);
                    } else if (currentStep === 5) {
                        calculateResults();
                    }
                }
            });

            console.log('ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼å½“å‰æ­¥éª¤ï¼š' + currentStep);

        })();
        // ==================== ä¸»ç¨‹åºç»“æŸ ====================
    </script>
</body>
</html>